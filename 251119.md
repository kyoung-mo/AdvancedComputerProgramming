### 39-2
```c
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#define MAX_STRING 100

int main(void)
{
    int day;
    int ap; //am or pm
    int ret;
    char str[MAX_STRING];

    FILE* fp = fopen("weather.dat", "r");
    if (fp == NULL)
    {
        puts("파일 'weather.dat'가 열리지 않았습니다.");
        return -1;
    }

    while (1)
    {
        
        /* 1. 날짜 입력: 숫자 */
        fread(&day, sizeof(int), 1, fp);
        if (feof(fp) != 0) break;
        printf("날짜: %d", day);

        /* 2. 지역 입력: 문자열 */
        fgets(str, MAX_STRING, fp);
        printf("\n지역:%s", str);

        /* 3. 오전/오후: 문자 */
        ap = fgetc(fp);
        printf("오전(A)/오후(P): %c\n", ap);

        /* 4. 날씨 입력: 문자열 */
        fgets(str, MAX_STRING, fp);
        printf("날씨: %s", str);


        printf("\n");

    }

    fclose(fp);
    puts("입력이 완료되었습니다.");
    return 0;
}
```

### 39-3
```c
#include <stdio.h>
#include <string.h>
#define MAX_STRING 100
int main(void)
{
int day, day_f;
char strRegion[MAX_STRING], strRegion_f[MAX_STRING];
int ap=0, ap_f; // am or pm
char strWeather_f[MAX_STRING];
FILE * fp=fopen("weather.dat", "r");
if(fp==NULL)
{
puts("파일 'weather.dat'가 열리지 않았습니다.");
return -1;
}
/* 검색할 날짜 정보 입력 */
fputs("검색할 날짜 및 지역 정보 입력: ", stdout);
fscanf(stdin, "%d %s %c", &day, &strRegion, &ap);
/* 비교를 위한 strRegion의 교정 */
sprintf(strRegion, "%s\n", strRegion);
while(1) /* 파일의 끝까지 비교 검색을 위한 while문 */
{
fread(&day_f, sizeof(int), 1, fp);
if(feof(fp)!=0) // 파일의 끝을 감지한 다음에야 비로소!
break;
fgets(strRegion_f, MAX_STRING, fp);
ap_f=fgetc(fp);
fgets(strWeather_f, MAX_STRING, fp);
if( day==day_f && // 날짜가 같고
!strcmp(strRegion, strRegion_f) && // 지역이 같고
ap==ap_f) // 오전/오후가 같다면...
{
fprintf(stdout, "날짜: %d \n", day_f);
fprintf(stdout, "지역: %s", strRegion_f);
fprintf(stdout, "오전(A)/오후(P): %c \n", ap_f);
fprintf(stdout, "날씨: %s \n", strWeather_f);
fclose(fp);
puts("검색이 완료되었습니다.");
return 0;
}
}
fclose(fp);
puts("해당 날짜 및 지역의 데이터가 존재하지 않습니다.");
return 0;
}
```
